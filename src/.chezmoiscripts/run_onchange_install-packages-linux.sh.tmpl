{{ if eq .chezmoi.os "linux" -}}
#!/bin/bash

# Install Linux Packages
{{      if or (eq .chezmoi.osRelease.id "debian") (eq .chezmoi.osRelease.id "ubuntu") -}}
# Ubuntu/Debian-specific code

sudo apt update && \
sudo apt install -y \
	bison \
	build-essential \
	git \
	libevent-dev \
	nano \
	ncurses-dev \
	pkg-config \
	python3 \
	unzip \
	zlib1g-dev \
	zsh

# Create a bin directory if you don't have one
mkdir -p ~/.local/bin

# Install oh-my-posh
echo "Installing oh-my-posh..."
curl -s https://ohmyposh.dev/install.sh | bash

# Install mise
curl https://mise.run | sh

# After mise is installed, source it to make it available in the script
eval "$(~/.local/bin/mise activate bash)"  # or zsh if using zsh

# Install packages using mise
mise use -g bat@latest
mise use -g fzf@latest
mise use -g eza@latest
mise use -g lazygit@latest
mise use -g tmux@latest
mise use -g zoxide@latest

# Shim fzf-tmux to fzf --tmux
# Create the wrapper
cat > ~/.local/bin/fzf-tmux << 'EOF'
#!/usr/bin/env bash
# Wrapper to call fzf with --tmux flag instead of using fzf-tmux
exec fzf --tmux 75%,75% "$@"
EOF

# Make it executable
chmod +x ~/.local/bin/fzf-tmux

{{      else if eq .chezmoi.osRelease.id "fedora" -}}
echo "Unsupported Linux distribution"
# Fedora-specific code
exit 1

{{      else if eq .chezmoi.osRelease.id "arch" -}}
echo "Unsupported Linux distribution"
# Arch-specific code
exit 1

{{      else -}}
echo "Unsupported Linux distribution"
exit 1

{{      end -}}

{{      if (.chezmoi.kernel.osrelease | lower | contains "microsoft") -}}
# WSL-specific code
{{      end -}}

{{ end -}}
